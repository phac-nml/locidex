- name: Run help
  command: locidex --help

- name: Run search help
  command: locidex search --help

- name: Run build help
  command: locidex build --help

- name: Run extract help
  command: locidex extract --help

- name: Run search DB selection
  command: locidex search --annotate --query locidex/example/search/NC_003198.1.fasta --db_group locidex/example/manifest_selection/dbs -o here --db_name "Locidex Database" --db_version 1.0.0

- name: Run search
  command: locidex search --annotate --query locidex/example/search/NC_003198.1.fasta -d locidex/example/build_db_mlst_out -o here

- name: Run extract
  command: locidex extract -i locidex/example/search/NC_003198.1.fasta -d locidex/example/build_db_mlst_out -o here

- name: Run extract DB selection
  command: locidex extract -i locidex/example/search/NC_003198.1.fasta --db_group locidex/example/manifest_selection/dbs --db_name "Locidex Database" --db_version 1.0.0 -o here

- name: Run all
  command: > 
    bash -c "
    locidex extract -i locidex/example/search/NC_003198.1.fasta -d locidex/example/build_db_mlst_out -o here;
    locidex search --query here/raw.extracted.seqs.fasta -d locidex/example/build_db_mlst_out -o searched;
    locidex report -i searched/seq_store.json -o reported
    "
  files:
    - path: "here/raw.extracted.seqs.fasta"
    - path: "searched/seq_store.json"
    - path: "reported/report.json"

